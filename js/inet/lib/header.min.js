$(function(){iNet.ns("iNet.ui.common","iNet.ui.common.Header","iNet.ui.header","iNet.ui.header.NotifyItem","iNet.ui.header.MenuItem");iNet.ui.common.Header=function(a){var c=a||{};this.autoDetect=false;iNet.apply(this,c);this.id=!iNet.isEmpty(this.id)?this.id:"icloud-header";this.items=this.items||[];this.menus=this.menus||[];this.$notifyItems=$('div[data-header-type="notify"]');this.$menuItems=$('div[data-header-type="menu"]');this.iconCls=this.iconCls||"";this.$element=$(this.id);this.$userProfile=
$("#user-profile");this.$menuDiv=$("#menu-divider");var b=$("#icloud-header-title");a=$("#menu-logout");b.html(String.format('<small><i class="{0}"></i> {1}</small>',this.iconCls,this.title||"Application Name"));if(this.autoDetect){for(b=0;b<this.$notifyItems.length;b++){var e=$(this.$notifyItems[b]);this.setItem(new iNet.ui.header.NotifyItem({$element:e}))}for(b=0;b<this.$menuItems.length;b++){e=$(this.$menuItems[b]);this.setMenuItem(new iNet.ui.header.MenuItem({$element:e}))}}else{for(b=0;b<this.items.length;b++)this.setItem(this.items[b]);
for(b=0;b<this.menus.length;b++)this.setMenuItem(this.menus[b])}a.click(function(){$.ajax({type:"POST",url:iNet.getUrl("system/logout"),dataType:"json",success:function(f){var d=$("<iframe/>");d.attr("style","display:none;");d.appendTo($("body"));d.load(function(){location.reload()});d.attr("src",f.uuid)}})})};iNet.extend(iNet.ui.common.Header,iNet.Component,{constructor:iNet.ui.common.Header,setItem:function(a){if(a&&a.isItem()){var c=a.getHtml();$(c).insertBefore(this.$userProfile);a.initItemComponent()}},
setMenuItem:function(a){if(a&&a.isMenu()){var c=a.getHtml();$(c).insertBefore(this.$menuDiv);a.initItemComponent()}}});iNet.ui.header.NotifyItem=function(a){var c=a||{};iNet.apply(this,c);this.$element=this.$element||$.getCmp(this.id);this.initComponent=this.initComponent||iNet.emptyFn;if(!this.$element)throw Error("[iNet.ui.header.NotifyItem] $element must not be null");};iNet.extend(iNet.ui.header.NotifyItem,iNet.Component,{initItemComponent:function(){this.initComponent();this.$element.remove();
this.fireEvent("loaded",this)},getHtml:function(){return this.$element.html()},isItem:function(){return true},isMenu:function(){return false}});iNet.ui.header.MenuItem=function(a){var c=a||{};iNet.apply(this,c);this.$element=this.$element||$.getCmp(this.id);this.initComponent=this.initComponent||iNet.emptyFn;if(!this.$element)throw Error("[iNet.ui.header.MenuItem] $element must not be null");};iNet.extend(iNet.ui.header.MenuItem,iNet.Component,{initItemComponent:function(){this.initComponent();this.$element.remove();
this.fireEvent("loaded",this)},getHtml:function(){return this.$element.html()},isItem:function(){return false},isMenu:function(){return true}})});