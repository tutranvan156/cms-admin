var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();$(function(){var t=function(t){function e(){var e=t.call(this)||this;return e.id="edoc-basic-search",e.url=iNet.getPUrl("steering/document/search"),e.formSearch={},e}return __extends(e,t),e.prototype.intComponent=function(){this.formSearch={}},e.prototype.getUrl=function(){return this.url},e.prototype.setFolder=function(t){this.folder=t},e.prototype.getFolder=function(){return this.folder?this.folder:this.assetFolder.getFirst()},e.prototype.getData=function(){return{pageSize:CMSConfig.PAGE_SIZE,pageNumber:0,keyword:"",type:"PROMULGATE",draft:!1}},e}(iNet.ui.grid.Search),e=function(e){function n(){var n=this;return n.id="edoc-shared-wg",n.module="document",n.resourceRoot=iNet.resources.cmsadmin,n.gridID="edoc-shared-list",n.url={list:iNet.getPUrl("steering/document/search")},n.selected=[],n.toolbar={UN_PUBLISHED:$("#list-btn-unpublished")},n.dataSource=new iNet.ui.grid.DataSource({columns:[{type:"selection",align:"center",width:30},{property:"signNumber",label:n.getText("sign_number"),type:"label",width:200},{property:"content",label:n.getText("content"),type:"label"},{property:"promulgationDate",label:n.getText("promulgation_date"),sortable:!0,type:"text",width:150,renderer:function(t){return new Date(t).format(iNet.dateFormat)}},{type:"action",align:"center",buttons:[{text:n.getText("unpublished"),icon:"fa fa-times",labelCls:"label label-warning",visibled:function(t){return n.getSecurity().hasRoles([CMSConfig.ROLE_ADMIN,CMSConfig.ROLE_LEGAL_DOC])},fn:function(t){n.showUnPublishConfirm({uuid:t.uuid,authorUnitCode:t.authorUnitCode})}}]}],delay:250}),n.basicSearch=t,n.init(),n=e.call(this)||this,n.toolbar.UN_PUBLISHED.on("click",function(){n.showUnPublishConfirm({ids:n.selected.map(function(t){return t.uuid}).join(CMSConfig.ARRAY_SEPARATOR)})}),n.getGrid().on("selectionchange",function(t){n.selected=t.getSelection(),FormUtils.disableButton(n.toolbar.UN_PUBLISHED,!(n.selected.length>0))}),n.getGrid().on("click",function(t){n.fireEvent("open",t,n)}),n}return __extends(n,e),n.prototype.init=function(){},n.prototype.unPublish=function(t){var e=this;LegalDocumentAPI.shareEdoc(t,function(t){t.type===CMSConfig.TYPE_ERROR?e.error(e.getText("unpublished"),e.getText("unpublished_error")):(e.reload(),e.success(e.getText("unpublished"),e.getText("unpublished_success")))})},n.prototype.showUnPublishConfirm=function(t){var e=this,n=this.confirmDlg(e.getText("unpublished"),e.getText("unpublished_confirm"),function(){var t=n.getData();t.shr_stt=!1,e.unPublish(t),n.hide()});n.setTitle('<i class="fa fa-times-circle-o text-warning"></i> '+e.getText("unpublished")),n.setData(t),n.show()},n}(iNet.ui.ListAbstract);iNet.ns("iNet.ui.document.SharedList"),iNet.ui.document.SharedList=e});