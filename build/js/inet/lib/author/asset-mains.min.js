/**
 * #PACKAGE: author
 * #MODULE: asset-mains
 */
/**
 * Copyright (c) 2018 iNet Solutions Corp.,
 * Created by Nguyen Ba Chi Cong<nbccong@inetcloud.vn>
 *         on 13:47 26/09/2018.
 * -------------------------------------------
 * @project cms-admin
 * @author nbchicong
 * @file AssetMains.ts
 */
$(function () {
    var AssetMains = /** @class */ (function () {
        function AssetMains() {
            var _this = this;
            this.types = new iNet.ui.author.AssetTypes();
            this.images = null;
            this.documents = null;
            this.history = new iNet.ui.form.History({
                id: 'history-' + iNet.generateId(),
                root: this.types
            });
            this.history.on('back', function (widget) {
                widget.show();
            });
            this.types.on('change', function (type, clazz) {
                switch (type) {
                    case CMSConfig.ASSET_TYPE_IMAGE:
                        _this.loadImages(clazz);
                        break;
                    case CMSConfig.ASSET_TYPE_DOCUMENT:
                        _this.loadDocuments(clazz);
                        break;
                }
            });
        }
        AssetMains.prototype.loadImages = function (parent) {
            var _this = this;
            if (!this.images) {
                this.images = new iNet.ui.author.AssetImages();
                this.images.on('back', function () {
                    _this.history.back();
                });
            }
            if (parent) {
                this.images.setParent(parent);
                parent.hide();
            }
            this.history.push(this.images);
            this.images.passRoles(parent);
            this.images.show();
            return this.images;
        };
        AssetMains.prototype.loadDocuments = function (parent) {
            var _this = this;
            if (!this.documents) {
                this.documents = new iNet.ui.author.AssetDocuments();
                this.documents.on('back', function () {
                    _this.history.back();
                });
            }
            if (parent) {
                this.documents.setParent(parent);
                parent.hide();
            }
            this.history.push(this.documents);
            this.documents.passRoles(parent);
            this.documents.show();
            return this.documents;
        };
        return AssetMains;
    }());
    // export class
    new AssetMains();
});
